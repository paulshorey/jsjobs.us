{"version":3,"file":"0.2eb4a443057976075436.hot-update.js","sources":["webpack:///src/routes/Search.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport \"isomorphic-unfetch\";\nimport * as Styled from \"./styled/Search.js\";\nimport { getAPIHostname } from \"modules/getAPI\";\nimport Layout from \"components/Layout.js\";\n\nconst query = {\n\tstart: 0,\n\tlimit: 50\n};\nconst queryAdvance = function() {\n\tquery.start += query.limit;\n};\n\nclass Search extends Component {\n\tstatic async getInitialProps({\n\t\trequest,\n\t\tresponse,\n\t\tmatch,\n\t\thistory,\n\t\tlocation,\n\t\t...ctx\n\t}) {\n\t\tconst res = await fetch(\n\t\t\tgetAPIHostname() +\n\t\t\t\t`/api/v1/jobs?text=${match.params.search}&start=${\n\t\t\t\t\tquery.start\n\t\t\t\t}&limit=${query.limit}`\n\t\t);\n\t\tconst json = await res.json();\n\t\treturn { jobs_count: json.results, jobs: json.data || [] };\n\t}\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tjobs: []\n\t\t};\n\t}\n\n\tasync componentWillMount() {\n\t\tqueryAdvance();\n\t\tconst res = await fetch(\n\t\t\tgetAPIHostname() +\n\t\t\t\t`/api/v1/jobs?text=&start=${query.start}&limit=${query.limit}`\n\t\t);\n\t\tconst json = await res.json();\n\t\tthis.setState({ jobs: json.data || [] });\n\t}\n\n\trender() {\n\t\tvar jobs = (this.props.jobs || []).concat(this.state.jobs || []);\n\t\t// get on with it...\n\t\tvar Jobs = [];\n\t\tif (jobs) {\n\t\t\tjobs.forEach(function(job, i) {\n\t\t\t\tJobs.push(\n\t\t\t\t\t<div key={job._id}>\n\t\t\t\t\t\t<div>{job.text}</div>\n\t\t\t\t\t\t<sup>{job.location}</sup>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\treturn (\n\t\t\t<Layout>\n\t\t\t\t<Styled.Search>\n\t\t\t\t\t<h2>\n\t\t\t\t\t\tSearch \"{this.props.match.params.search}\" results:{\" \"}\n\t\t\t\t\t\t{jobs.length}\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div>{Jobs}</div>\n\t\t\t\t</Styled.Search>\n\t\t\t</Layout>\n\t\t);\n\t}\n}\n\nexport default Search;\n\n\n\n// WEBPACK FOOTER //\n// src/routes/Search.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AACA;AACA;;AADA;;AAMA;AACA;;AADA;AACA;AACA;;;;;;;;;;;;;;;;;AACA;AAAA;AACA;AADA;AACA;AACA;AACA;AADA;AAFA;AAKA;AACA;;;;;;;;;;AAEA;;AACA;AACA;;AADA;;AAIA;AACA;;AADA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AACA;AAFA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALA;AADA;AAUA;;;;AA5DA;AACA;AA8DA;;;;A","sourceRoot":""}