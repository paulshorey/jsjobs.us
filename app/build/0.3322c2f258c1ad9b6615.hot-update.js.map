{"version":3,"file":"0.3322c2f258c1ad9b6615.hot-update.js","sources":["webpack:///src/components/search/Results.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport \"isomorphic-unfetch\";\nimport * as Styled from \"./styled/Results.js\";\nimport { getAPIHostname } from \"modules/getAPI\";\nimport { observable, action, computed, useStrict } from \"mobx\";\n\n// const query = {\n// \tstart: 0,\n// \tlimit: 50\n// };\n// const queryAdvance = function() {\n// \tquery.start += query.limit;\n// };\n\nclass Query extends React.Component {\n\thandleUsernameSubmission(e) {\n\t\tif (e) {\n\t\t\te.preventDefault();\n\t\t}\n\t\tconst name = this.refs.skill.value;\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<form onSubmit={this.handleUsernameSubmission}>\n\t\t\t\t\t<input placeholder=\"skill...\" ref=\"skill\" />\n\t\t\t\t\t<input type=\"submit\" value=\"Search\" />\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass Results extends Component {\n\tstatic async getInitialProps({ match }) {\n\t\tconst res = await fetch(getAPIHostname() + `/api/v1/jobs?text=&start=0&limit=100`);\n\t\tconst json = await res.json();\n\t\treturn { jobs: json.data || [] };\n\t}\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tjobs: []\n\t\t};\n\t}\n\n\tasync componentWillMount() {\n\t\tconst res = await fetch(getAPIHostname() + `/api/v1/jobs?text=&start=0&limit=10000`);\n\t\tconst json = await res.json();\n\t\tthis.setState({ jobs: json.data || [], jobs_count: json.data.length || 0 });\n\t}\n\n\tfilterJobs(jobs) {\n\t\treturn jobs;\n\t}\n\n\trender() {\n\t\tvar jobs_count = this.state.jobs_count; // not jobs.length on purpose\n\t\tvar jobs = this.state.jobs.length ? this.state.jobs : this.props.jobs;\n\t\tjobs = this.filterJobs(jobs);\n\t\t// get on with it...\n\t\tvar Jobs = [];\n\t\tif (jobs) {\n\t\t\tjobs.forEach(function(job, i) {\n\t\t\t\tJobs.push(\n\t\t\t\t\t<div key={job._id}>\n\t\t\t\t\t\t<div>{job.text}</div>\n\t\t\t\t\t\t<sup>{job.location}</sup>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\treturn (\n\t\t\t<Styled.Results>\n\t\t\t\t<h2>Query:</h2>\n\t\t\t\t<Query />\n\t\t\t\t<h2> </h2>\n\n\t\t\t\t<h2>Results: {jobs_count}</h2>\n\t\t\t\t<div>{Jobs}</div>\n\t\t\t</Styled.Results>\n\t\t);\n\t}\n}\n\nexport default Results;\n\n\n\n// WEBPACK FOOTER //\n// src/components/search/Results.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AADA;AAOA;;;;AAhBA;AACA;AAkBA;;;;;;;AACA;;;;;;;AACA;AACA;;AADA;;AACA;AACA;;AADA;AACA;AACA;;;;;;;;;;;;;;;;;AACA;AAAA;AACA;AADA;AACA;AACA;AACA;AADA;AAFA;AAKA;AACA;;;;;;;;;;;AAEA;AACA;;AADA;;AACA;AACA;;AADA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANA;AASA;;;;AAjDA;AACA;AAmDA;;;;A","sourceRoot":""}